<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebGL & Three.js Demo</title>
  <style>
    body {
      margin: 0;
      display: flex;
      flex-direction: row;
      height: 100vh;
      background: #000;
    }
    .demo {
      flex: 1;
      position: relative;
    }
    canvas {
      width: 100%;
      height: 100%;
      display: block;
    }
    .info {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-family: sans-serif;
      z-index: 10;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 10px;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <!-- Pure WebGL Demo -->
  <div id="webglDemo" class="demo">
    <div class="info">Pure WebGL Demo</div>
    <canvas id="webglCanvas"></canvas>
  </div>

  <!-- Three.js Demo -->
  <div id="threeDemo" class="demo">
    <div class="info">Three.js Demo</div>
    <canvas id="threeCanvas"></canvas>
  </div>

  <script>
    // Pure WebGL Demo: animate clear color
    (function() {
      const canvas = document.getElementById('webglCanvas');
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (!gl) {
        console.error('WebGL not supported');
        return;
      }
      function resizeCanvas() {
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;
        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
      }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();

      let hue = 0;
      function render() {
        hue += 0.01;
        const r = Math.abs(Math.sin(hue));
        const g = Math.abs(Math.sin(hue + 2));
        const b = Math.abs(Math.sin(hue + 4));
        gl.clearColor(r, g, b, 1.0);
        gl.clear(gl.COLOR_BUFFER_BIT);
        requestAnimationFrame(render);
      }
      render();
    })();
  </script>

  <!-- Include Three.js -->
  <script src="three.min.js"></script>
  <script>
    // Three.js Demo: rotating cube
    (function() {
      const canvas = document.getElementById('threeCanvas');
      const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
      renderer.setSize(canvas.clientWidth, canvas.clientHeight);

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
      camera.position.z = 5;

      // Create a cube
      const geometry = new THREE.BoxGeometry();
      const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true });
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);

      function resize() {
        const width = canvas.clientWidth;
        const height = canvas.clientHeight;
        renderer.setSize(width, height);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      }
      window.addEventListener('resize', resize);

      function animate() {
        requestAnimationFrame(animate);
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();
    })();
  </script>
</body>
</html>